pipeline {
  agent any
  tools {
    maven "eagle-i"
  }
  environment {
  
       IMAGE_TAG = "${BUILD_NUMBER}"
    
  }


  stages {
    stage ('Maven clean') {
      steps {
      sh 'mvn clean'
      }
    }

 stage ('Maven package') {
      steps {
      sh 'mvn package'
  
    }
    
 }
    stage ('Docker build') {
      steps {
      sh 'docker build -t devopstrainingschool/eagle-i:$IMAGE_TAG .'
      }
    
    }


    }
    
    
    
}    